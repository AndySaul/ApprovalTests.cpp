<!--
GENERATED FILE - DO NOT EDIT
This file was generated by [MarkdownSnippets](https://github.com/SimonCropp/MarkdownSnippets).
Source File: /doc/mdsource/UsingUT.source.md
To change this file edit the source file and then execute ./run_markdown_templates.sh.
-->

<a id="top"></a>

# Using Approval Tests With \[Boost\].UT


<!-- toc -->
## Contents

  * [Getting Started With \[Boost\].UT](#getting-started-with-boostut)
    * [Requirements](#requirements)
    * [Usage example](#usage-example)<!-- endtoc -->


## Getting Started With \[Boost\].UT

The [\[Boost\].UT](https://github.com/boost-experimental/ut) test framework works well with Approval Tests.

\[Boost\].UT is a single header/single module, macro-free Î¼(micro)/Unit Testing Framework that requires C++17 / C++20

### Requirements

Approval Tests for \[Boost\].UT requires that a file called `ut.hpp` is found.

Approval Tests needs \[Boost\].UT version 1.1.4 or above.

### Usage example

Add the following two lines to your source code:

<!-- snippet: ut_main -->
<a id='snippet-ut_main'/></a>
```cpp
#define APPROVALS_UT
#include "ApprovalTests.hpp"
```
<sup><a href='/tests/UT_Tests/ApprovalTestTests.cpp#L1-L4' title='File snippet `ut_main` was extracted from'>snippet source</a> | <a href='#snippet-ut_main' title='Navigate to start of snippet `ut_main`'>anchor</a></sup>
<!-- endsnippet -->

Bellow is an example of a call to an approval test inside a \[Boost\].UT test:

<!-- snippet: ut_main_usage -->
<a id='snippet-ut_main_usage'/></a>
```cpp
"ItCanVerifyAFile"_test = []() {

    try {
        Approvals::verify("Approval Tests can verify text via the golden master method");
    }
    catch (const std::exception& e) {
        detail::log{} << e.what();
        expect(false);
    }
	};
```
<sup><a href='/tests/UT_Tests/ApprovalTestTests.cpp#L13-L24' title='File snippet `ut_main_usage` was extracted from'>snippet source</a> | <a href='#snippet-ut_main_usage' title='Navigate to start of snippet `ut_main_usage`'>anchor</a></sup>
<!-- endsnippet -->

In the following example, two instances of ApprovalTests are called inside the same test:

<!-- snippet: ut_main_multiple -->
<a id='snippet-ut_main_multiple'/></a>
```cpp
"ItCanUseMultipleVerify"_test = []() {
    try {
            auto section = NamerFactory::appendToOutputFilename("section 1");
            Approvals::verify("Approval Tests can verify text via the golden master method");
    }
    catch (const std::exception & e) {
        detail::log{} << e.what();
        expect(false);
    }

    try {
        auto section = NamerFactory::appendToOutputFilename("section 2");
        Approvals::verify("Approval Tests can verify text via the golden master method");
    }
    catch (const std::exception & e) {
        detail::log{} << e.what();
        expect(false);
    }
};
```
<sup><a href='/tests/UT_Tests/ApprovalTestTests.cpp#L36-L56' title='File snippet `ut_main_multiple` was extracted from'>snippet source</a> | <a href='#snippet-ut_main_multiple' title='Navigate to start of snippet `ut_main_multiple`'>anchor</a></sup>
<!-- endsnippet -->

<!-- todo: document use of sections -->

---

[Back to User Guide](/doc/README.md#top)

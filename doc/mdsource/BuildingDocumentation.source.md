<a id="top"></a>

# Building Documentation

toc

## Introduction

## mdsnippets and Markdown Files

* Purpose:
    * Update the machine-generated markdown files, which will be later used as inputs to the sphinx documentation
* Configuration files:
    * `doc/run_mdsnippets/CMakeLists.txt`
        * Creates a CMake target `RunMdsnippets`
            * Note: this is not included in the target `all`
        * This target makes it convenient to quickly run `run_markdown_templates.sh` from within CLion, without switching to a console window.
    * `mdsnippets.json`
        * Configuration used by mdsnippets
* Input files:
    * `doc/mdsource/*.source.md`
    * `doc/explanations/mdsource/*.source.md`
    * `doc/how_tos/mdsource/*.source.md`
    * `doc/mdsource/*.include.md`
      * Get included in generated *.md files
    * `doc/https://github.com/claremacrae/ApprovalTests.cpp.CMakeSamples)/*.include.md`
      * Machine-generated files for included in Conan and CMake docs
* Output Files:
    * `doc/*.md`
    * `doc/explanations/*.md`
    * `doc/how_tos/.*md`

![Flow of Markdown files through mdsnippets](/doc/images/mdsnippets_flow.png?raw=true)

## Images

* `doc/images/*`
  * Images for inclusion in docs
* `doc/images/tutorial/*`
  * Images for inclusion in docs
* `doc/images/source/*`
  * Sources for some of the images.
* `doc/images/source/generate_images.py`
  * Script that generates images from some source files.

## Doxygen Files

* Purpose:
    * Read the library's source code, to generate a set of XML files that describe the API
    * These XML files will later be read by Sphinx to create the API documentation
* Configuration files:
    * `doc/doxygen/CMakeLists.txt`
        * Creates a CMake target `Doxygen`
            * Note: this is not included in the target `all`
        * Manages the dependencies shown in the image below
    * `doc/doxygen/Doxyfile.in`
        * Template file containing the Doxygen configuration
        * CMake converts it to `Doxyfile` in the build tree
* Input files:
    * `doc/doxygen_doc/*.dox`
        * Files containing descriptive text for including in the Doxygen documentation
    * `doc/ApprovalTests/*.cpp`
    * `doc/ApprovalTests/*.h`
* Output Files:
    * `build_tree/doc/doxygen/xml/index.xml`
        * This and related .xml files are supplied to sphinx, to generate the API docs on Read the Docs
    * `build_tree/doc/doxygen/html/index.html`
        * This file may be useful on developer machines, to review the documentation generated by Doxygen

![Flow of files through doxygen](/doc/images/doxygen_flow.png?raw=true)

## Sphinx ReStructured Text Files

* Input files:
    * `doc/sphinx/index.rst`
    * `doc/sphinx/api/*.rst`
    * Outputs from mdsnippets:
        * `doc/*.md`
        * `doc/explanations/*.md`
        * `doc/how_tos/*.md`
* Intermediate Files:
    * `doc/sphinx/generated_docs/*.rst`
    * `doc/sphinx/generated_docs/explanations/*.rst`
    * `doc/sphinx/generated_docs/how_tos/*.rst`
* Output Files:
    * `build_tree/doc/sphinx/index.html`
    * [Read the Docs documentation](https://approvaltestscpp.readthedocs.io/en/latest/)

![Flow of files through Sphinx](/doc/images/sphinx_flow.png?raw=true)

## Other Files to Explain

<!-- List created with tree -f -F -i doc | pbcopy -->


```text
doc/requirements.txt

doc/sphinx/
doc/sphinx/CMakeLists.txt
doc/sphinx/__init__.py
doc/sphinx/_templates/
doc/sphinx/_templates/breadcrumbs.html
doc/sphinx/api/
doc/sphinx/conf.py
doc/sphinx/markdown_conversion.py

doc/sphinx/tests/
doc/sphinx/tests/TestWholeConversion.test_convert_github_markdown_for_input_to_pandoc_in_root_docdir.approved.md
doc/sphinx/tests/TestWholeConversion.test_convert_github_markdown_for_input_to_pandoc_in_root_docdir.approved.rst
doc/sphinx/tests/__init__.py
doc/sphinx/tests/test_markdown_conversion.py
doc/sphinx/tests/test_markdown_conversion_input.md

```


## CMake Targets




---

[Back to User Guide](/doc/README.md#top)

<!--
GENERATED FILE - DO NOT EDIT
This file was generated by [MarkdownSnippets](https://github.com/SimonCropp/MarkdownSnippets).
Source File: /doc/mdsource/UsingCatch.source.md
To change this file edit the source file and then execute ./run_markdown_templates.sh.
-->

<a id="top"></a>

# Using Approval Tests With Catch


<!-- toc -->
## Contents

  * [Getting Started With Catch 1 and 2](#getting-started-with-catch-1-and-2)
    * [Starter Project](#starter-project)
    * [New Project](#new-project)
    * [Existing Project - with CATCH_CONFIG_MAIN](#existing-project---with-catch_config_main)
    * [Existing Project - with your main()](#existing-project---with-your-main)
<!-- endtoc -->




## Getting Started With Catch 1 and 2

The [Catch2](https://github.com/catchorg/Catch2) test framework works well with Approval Tests.

This section describes the various ways of using Approval Tests with Catch 2.

These steps also work with the earlier version, Catch 1, which is on the [Catch 1.x branch](https://github.com/catchorg/Catch2/tree/Catch1.x), and is still provided for those on pre-C++11 compilers. (Please note that the Approval Tests library requires C++11 or newer, however). 

Approval Tests requires that a file called `catch.hpp` is found.

### Starter Project

The quickest way to start experimenting with Approval Tests is to:

1. Download the project [ApprovalTests.cpp.StarterProject](https://github.com/approvals/ApprovalTests.cpp.StarterProject) - via the green "Clone or Download" button at the top-right of the project site.
2. Opening the project in the C++ IDE of your choice.

Each time we release a new version of Approval Tests, we update this project, so it always has the latest features. 

### New Project

Create a file `main.cpp` and add just the following two lines:

<!-- snippet: catch_2_main -->
<a id='snippet-catch_2_main'/></a>
```cpp
// main.cpp:
#define APPROVALS_CATCH // This tells Approval Tests to provide a main() - only do this in one cpp file
#include "ApprovalTests.hpp"
```
<sup>[snippet source](/tests/Catch2_Tests/main.cpp#L6-L10) / [anchor](#snippet-catch_2_main)</sup>
<!-- endsnippet -->

### Existing Project - with CATCH_CONFIG_MAIN

If you have a Catch (1 or 2) project with your own `main.cpp` that contains the following lines, you will need to replace them with the code in the previous section.

```cpp
#define CATCH_CONFIG_MAIN // remove these lines, and replace with Approval Tests lines
#include "catch.hpp"
```

<!-- todo: document use of sections -->

### Existing Project - with your main()

If you have [supplied your own `main()` for Catch](https://github.com/catchorg/Catch2/blob/master/docs/own-main.md#top), you will need to teach it how to supply test names to Approval Tests.

You should make the following additions to your own source file that contains `main()`.  

<!-- snippet: catch_existing_main -->
<a id='snippet-catch_existing_main'/></a>
```cpp
// main.cpp:

// Add these two lines to your main:
#define APPROVALS_CATCH_EXISTING_MAIN
#include "ApprovalTests.hpp"

int main( int argc, char* argv[] )
{
    // your existing setup...
    int result = Catch::Session().run( argc, argv );
    // your existing clean-up...
    return result;
}
```
<sup>[snippet source](/examples/catch2_existing_main/main.cpp#L1-L15) / [anchor](#snippet-catch_existing_main)</sup>
<!-- endsnippet -->


---

[Back to User Guide](/doc/README.md#top)
